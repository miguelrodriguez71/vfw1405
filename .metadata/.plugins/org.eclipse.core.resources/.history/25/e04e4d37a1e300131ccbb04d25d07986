var buildGallery = function() {
	var platWidth = Ti.Platform.displayCaps.platformWidth;
	var platHeight = Ti.Platform.displayCaps.platformHeight;

	var targetFolder = Ti.Filesystem.getFile(Ti.Filesystem.resourcesDirectory, "images");
	var pictureArray = targetFolder.getDirectoryListing();
	var totalImages = pictureArray.length;
	var imagesPerRow = 4;
	
	var imageWidth = (platWidth - 50) / 4;
	var imageHeight = (platHeight - 60 ) / imageWidth;	

	console.log("ancho del movil  "+ platWidth);
	console.log("largo  "+ platHeight);
	
	console.log("ancho imagen  "+ imageWidth);
	console.log("largo imagen  "+ imageHeight);
	
	var winGallery = Ti.UI.createWindow({
		title: "Countries Gallery",
		layout: "horizontal",
		top: 10,
		left: 10,
		right: 10
	});
	
	var navWindow = Ti.UI.iOS.createNavigationWindow({
		window: winGallery
	});	
	
		for(var i = 0; i < totalImages;  i++) {
			var myPicture = Ti.UI.createImageView({
				image: "images/"+ pictureArray[i],
				width: imageWidth-5,
				height: 67,
				borderRadius: 2,
				top: 10,
				left: 10
				
			});
			
			winGallery.add(myPicture);		
		};

	navWindow.open();
};


mainButton.addEventListener("click", buildGallery);


